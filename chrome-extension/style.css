/* YouTube双语字幕样式 - 智能定位版 */
#youtube-bilingual-subtitles {
  position: fixed !important;
  z-index: 999999999 !important;
  pointer-events: auto !important; /* 允许拖拽交互 */
  font-family: 'Roboto', 'YouTube Noto', sans-serif !important;
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
  width: auto !important;
  height: auto !important;
  transition: transform 0.2s ease !important;
}

#youtube-bilingual-subtitles .subtitle-container {
  background: transparent !important; /* 移除统一背景 */
  border-radius: 0 !important;
  padding: 8px 0 !important;
  max-width: 80vw !important;
  text-align: center !important;
  box-shadow: none !important; /* 移除容器阴影 */
  border: none !important;
  display: flex !important;
  flex-direction: column !important;
  align-items: center !important;
  gap: 0px !important; /* 移除中英文间距 */
  cursor: ns-resize !important; /* 整个区域显示拖拽光标 */
  position: relative !important;
  min-height: 20px !important;
  transition: box-shadow 0.3s ease !important;
}

/* 拖拽提示样式 */
#youtube-bilingual-subtitles .drag-indicator {
  position: absolute !important;
  top: -12px !important;
  left: 50% !important;
  transform: translateX(-50%) !important;
  width: 30px !important;
  height: 12px !important;
  background: rgba(0, 255, 255, 0.6) !important;
  border-radius: 6px 6px 0 0 !important;
  cursor: ns-resize !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  font-size: 8px !important;
  color: rgba(0, 0, 0, 0.8) !important;
  opacity: 0 !important;
  transition: all 0.3s ease !important;
  z-index: 1000000000 !important;
  user-select: none !important;
  pointer-events: auto !important;
  font-weight: 900 !important; /* 最粗字体 */
}

/* 英文字幕样式 - ASS风格，独立背景 */
#youtube-bilingual-subtitles .original-subtitle {
  color: #00FFFF !important; /* 青色 */
  font-family: "Noto Serif", "YouTube Noto", sans-serif !important;
  font-weight: 900 !important; /* 最粗字体 */
  /* font-size由JavaScript动态计算，不再写死 */
  line-height: 1.4 !important;
  text-shadow: 2px 2px 6px rgba(0, 0, 0, 0.9), 1px 1px 2px rgba(0, 0, 0, 0.8) !important;
  text-align: center !important;
  pointer-events: none !important; /* 文字不干扰拖拽 */
  /* 独立背景样式 - 根据文字宽度自适应 */
  background: rgba(0, 0, 0, 0.75);
  border-radius: 4px;
  padding: 3px 8px;
  display: inline-block;
  max-width: fit-content !important;
  word-wrap: break-word !important;
  white-space: pre-wrap !important;
  margin: 0 auto -3px auto !important; /* 负margin让中文重叠到英文 */
}

/* 中文字幕样式 - ASS风格，独立背景 */
#youtube-bilingual-subtitles .translated-subtitle {
  color: #00FF00 !important; /* 绿色 */
  font-family: "Songti SC Black", "Songti SC", "STSongti-SC-Black", "宋体-简", "SimSun", "宋体", "黑体", "SimHei", "Heiti SC", "Microsoft YaHei", "微软雅黑", "Noto Sans CJK SC", sans-serif !important;
  font-weight: 900 !important; /* 最粗字体 */
  /* font-size由JavaScript动态计算，不再写死 */
  line-height: 1.4 !important;
  /* 增强的文字阴影效果 */
  text-shadow: 
    2px 2px 6px rgba(0, 0, 0, 0.9), 
    1px 1px 2px rgba(0, 0, 0, 0.8),
    -1px -1px 2px rgba(0, 0, 0, 0.5),
    1px -1px 2px rgba(0, 0, 0, 0.5),
    -1px 1px 2px rgba(0, 0, 0, 0.5),
    0 0 3px rgba(0, 0, 0, 0.7) !important;
  text-align: center !important;
  pointer-events: none !important; /* 文字不干扰拖拽 */
  /* 增强字体粗细度的CSS技巧 */
  filter: contrast(1.2) brightness(1.1) !important;
  font-stretch: condensed !important;
  /* 文字描边效果，增加粗重感 */
  -webkit-text-stroke: 0.5px rgba(0, 0, 0, 0.8) !important;
  text-stroke: 0.5px rgba(0, 0, 0, 0.8) !important;
  /* 独立背景样式 - 根据文字宽度自适应 */
  background: rgba(0, 0, 0, 0.75);
  border-radius: 4px;
  padding: 3px 8px;
  display: inline-block;
  max-width: fit-content !important;
  word-wrap: break-word !important;
  white-space: pre-wrap !important;
  margin: 0 auto !important;
}

/* 确保在全屏模式下也能正确显示 */
.html5-video-player.ytp-fullscreen #youtube-bilingual-subtitles {
  bottom: 100px !important;
}

/* 确保不被YouTube原生字幕遮挡 */
.ytp-caption-window-container {
  bottom: 180px !important;
}

/* 强制覆盖所有可能的隐藏样式 */
#youtube-bilingual-subtitles,
#youtube-bilingual-subtitles.force-show,
body #youtube-bilingual-subtitles,
html #youtube-bilingual-subtitles {
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
  position: fixed !important;
  z-index: 999999999 !important;
}

/* 防止YouTube的CSS重置影响 */
#youtube-bilingual-subtitles * {
  box-sizing: border-box !important;
}

/* 强制覆盖所有可能的字体大小设置 */
#youtube-bilingual-subtitles .original-subtitle,
#youtube-bilingual-subtitles .translated-subtitle {
  font-size: inherit !important; /* JavaScript会动态设置 */
}

/* 更高优先级的字体大小覆盖 */
body #youtube-bilingual-subtitles .original-subtitle,
body #youtube-bilingual-subtitles .translated-subtitle,
html #youtube-bilingual-subtitles .original-subtitle,
html #youtube-bilingual-subtitles .translated-subtitle {
  font-size: inherit !important;
}